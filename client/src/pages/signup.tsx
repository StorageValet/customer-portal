import { useState } from 'react';
import { api } from '../lib/api';
export default function SignupPage() {
  const [form, setForm] = useState({ fullName: '', email: '', phone: '', addressLine1: '', unit: '', city: 'Hoboken', state: 'NJ', zipCode: '07030', planTier: 'starter', promoCode: '', agreeTos: true });
  function set<K extends keyof typeof form>(k: K, v: (typeof form)[K]) { setForm({ ...form, [k]: v }); }
  const onSubmit = async (e: React.FormEvent) => { e.preventDefault(); const res = await api.signup(form); if (res.flow === 'checkout' && res.checkoutUrl) window.location.href = res.checkoutUrl; else alert('Check your email for a sign-in link.'); };
  return (<div className="p-6 max-w-xl mx-auto"><h1 className="text-xl font-semibold mb-4">Create your account</h1><form onSubmit={onSubmit} className="grid gap-3"><input className="border p-2" placeholder="Full name" value={form.fullName} onChange={e=>set('fullName', e.target.value)} /><input className="border p-2" placeholder="Email" value={form.email} onChange={e=>set('email', e.target.value)} /><input className="border p-2" placeholder="Phone" value={form.phone} onChange={e=>set('phone', e.target.value)} /><input className="border p-2" placeholder="Address line 1" value={form.addressLine1} onChange={e=>set('addressLine1', e.target.value)} /><div className="grid grid-cols-3 gap-2"><input className="border p-2" placeholder="Unit" value={form.unit} onChange={e=>set('unit', e.target.value)} /><input className="border p-2" placeholder="City" value={form.city} onChange={e=>set('city', e.target.value)} /><input className="border p-2" placeholder="State" value={form.state} onChange={e=>set('state', e.target.value)} /></div><div className="grid grid-cols-3 gap-2"><input className="border p-2" placeholder="Zip" value={form.zipCode} onChange={e=>set('zipCode', e.target.value)} /><select className="border p-2" value={form.planTier} onChange={e=>set('planTier', e.target.value)}><option value="starter">Starter ($199)</option><option value="medium">Medium ($299)</option><option value="family">Family ($399)</option></select><input className="border p-2" placeholder="Promo code" value={form.promoCode} onChange={e=>set('promoCode', e.target.value)} /></div><label className="flex items-center gap-2"><input type="checkbox" checked={form.agreeTos} onChange={e=>set('agreeTos', e.target.checked)} />I agree to the Terms of Service</label><button className="bg-black text-white px-4 py-2 rounded">Continue</button></form></div>);
}
